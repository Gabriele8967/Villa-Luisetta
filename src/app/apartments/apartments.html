<div class="apartments-container">
  <!-- Navigation Unificata -->
  <app-navigation></app-navigation>

  <main class="main-content">
    <!-- Hero Section Rinnovata -->
    <section class="hero-showcase">
      <div class="hero-content">
        <h1 class="hero-title">
          <span class="title-line">Le nostre</span>
          <span class="title-line highlight">Stanze</span>
        </h1>
        <p class="hero-description">
          Scopri il comfort dei nostri appartamenti dove ogni dettaglio 
          √® curato per offrirti un soggiorno piacevole a Villa Luisetta
        </p>
        <div class="hero-stats">
          <div class="stat-item">
            <span class="stat-number">6</span>
            <span class="stat-label">Stanze Disponibili</span>
          </div>
        </div>
      </div>
      <div class="hero-visual">
      </div>
    </section>

    <!-- Apartments Showcase -->
    <section class="apartments-showcase">
      <div class="showcase-header">
        <h2 class="section-title">Scegli la Tua Stanza</h2>
      </div>

      <div class="apartments-masonry">
        <div class="apartment-tile" 
             *ngFor="let apartment of apartments; let i = index"
             [style.animation-delay.ms]="i * 150">
          
          <!-- Apartment Card -->
          <div class="tile-content">
            
            <!-- Main Info -->
            <div class="tile-header">
              <div class="room-type" [class]="getRoomTypeClass(apartment.id)">
                {{ getRoomType(apartment.id) }}
              </div>
              <div class="price-badge">
                <span class="price-amount">{{ apartment.price }}</span>
              </div>
            </div>

            <!-- Room Image Carousel -->
            <div class="tile-image-carousel" (click)="openImageModal(apartment)">
              <div class="carousel-container">
                <img [src]="getCurrentImage(apartment)" 
                     [alt]="apartment.name" 
                     class="room-image" 
                     loading="lazy">
                
                <!-- Carousel Navigation -->
                <button class="carousel-btn carousel-btn-prev" 
                        (click)="prevImage(apartment.id, $event)"
                        *ngIf="apartment.images.length > 1">
                  <span class="carousel-arrow">‚Äπ</span>
                </button>
                <button class="carousel-btn carousel-btn-next" 
                        (click)="nextImage(apartment.id, $event)"
                        *ngIf="apartment.images.length > 1">
                  <span class="carousel-arrow">‚Ä∫</span>
                </button>
                
                <!-- Image Counter -->
                <div class="image-counter" *ngIf="apartment.images.length > 1">
                  {{ getCarouselIndex(apartment.id) + 1 }} / {{ apartment.images.length }}
                </div>
                
                <!-- Click indicator -->
                <div class="click-indicator">
                  <span class="indicator-icon">üîç</span>
                  <span class="indicator-text">Clicca per vedere tutte le foto</span>
                </div>
              </div>
            </div>

            <div class="tile-body">
              <h3 class="apartment-title">{{ apartment.name }}</h3>
              <p class="apartment-size">{{ apartment.size }}</p>
            </div>


            <!-- Action Footer -->
            <div class="tile-footer">
              <button class="contact-btn-main" (click)="scrollToContact()">
                <span class="btn-text">Contattaci</span>
                <span class="btn-arrow">üìû</span>
              </button>
            </div>

          </div>


        </div>
      </div>
    </section>

    <!-- Call to Action -->
    <section class="cta-section">
      <div class="cta-content">
        <h2 class="cta-title">Pronto per il Tuo Soggiorno?</h2>
        <p class="cta-description">
          Contattaci per ricevere informazioni e scoprire 
          le nostre disponibilit√† per le tue date
        </p>
        <div class="cta-actions">
          <a href="mailto:{{ contactInfo.email }}" class="cta-btn primary">
            <span class="cta-icon">‚úâ</span>
            <span>Richiedi Disponibilit√†</span>
          </a>
          <a href="tel:+393247829723" class="cta-btn secondary">
            <span class="cta-icon">üìû</span>
            <span>Chiamaci</span>
          </a>
        </div>
      </div>
      <div class="cta-decoration">
        <div class="decoration-circle"></div>
        <div class="decoration-line"></div>
      </div>
    </section>

  </main>

  <!-- Image Modal -->
  <div class="image-modal" 
       *ngIf="showModal" 
       (click)="closeModal()"
       (keydown)="onModalKeydown($event)"
       tabindex="0">
    <div class="modal-overlay"></div>
    
    <div class="modal-content" (click)="$event.stopPropagation()">
      <!-- Modal Header -->
      <div class="modal-header">
        <h3 class="modal-title">{{ modalRoomName }}</h3>
        <button class="modal-close" (click)="closeModal()">
          <span>‚úï</span>
        </button>
      </div>
      
      <!-- Modal Image -->
      <div class="modal-image-container">
        <img [src]="modalImages[modalCurrentIndex]" 
             [alt]="modalRoomName" 
             class="modal-image">
        
        <!-- Modal Navigation -->
        <button class="modal-nav-btn modal-prev" 
                (click)="prevModalImage()"
                *ngIf="modalImages.length > 1">
          <span class="nav-arrow">‚Äπ</span>
        </button>
        <button class="modal-nav-btn modal-next" 
                (click)="nextModalImage()"
                *ngIf="modalImages.length > 1">
          <span class="nav-arrow">‚Ä∫</span>
        </button>
        
        <!-- Modal Counter -->
        <div class="modal-counter" *ngIf="modalImages.length > 1">
          {{ modalCurrentIndex + 1 }} di {{ modalImages.length }}
        </div>
      </div>
      
      <!-- Modal Footer -->
      <div class="modal-footer" *ngIf="modalImages.length > 1">
        <div class="modal-thumbnails">
          <div class="thumbnail" 
               *ngFor="let image of modalImages; let i = index"
               [class.active]="i === modalCurrentIndex"
               (click)="modalCurrentIndex = i">
            <img [src]="image" [alt]="modalRoomName">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>